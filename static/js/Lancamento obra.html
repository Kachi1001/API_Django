<!DOCTYPE html>
<!-- saved from url=(0062)http://10.0.0.211:8001/Lancamento_obra/lancamentos/programacao -->
<html lang="pt-br"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Lancamento obra</title>
    <meta name="viewport" content="width=device-width, initial-scale=0.8">
    <link rel="shortcut icon" href="http://10.0.0.211:8001/static/favicon.ico" type="image/x-icon">
    
<script src="./Lancamento obra_files/jquery-3.7.1.js.download"></script>
<!-- <script src="Lancamento_obra/static/js/jquery-3.7.1.js"></script> -->

 <!-- Jquery -->
    
<!-- Bootstrap -->

<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.3/css/bootstrap.css" rel="stylesheet"> -->
<link href="./Lancamento obra_files/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<!-- <link rel="stylesheet" href="/static/css/bootstrap.css"> -->

<link rel="stylesheet" href="./Lancamento obra_files/bootstrap-icons.css">
<!-- <link rel="stylesheet" href="/static/css/bootstrap-icons.css"> -->

<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script> -->
<script src="./Lancamento obra_files/bootstrap.bundle.min.js.download" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<!-- <script src="/static/js/bootstrap.js"></script> -->

<!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script> -->
<!-- <script src="/static/js/popper.js"></script> -->

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.3/js/bootstrap.bundle.js"></script> -->
<!-- <script src="/static/js/bootstrap.bundle.js"></script> -->

<!-- <script src="/static/js/bootstrap.esm.js"></script>  --> <!-- Bootstrap -->
    <link rel="stylesheet" href="./Lancamento obra_files/base.css">

    <script>
        const api = 'http://10.0.0.211:8003'
        const midia = 'http://10.0.0.211:8003/midia/Lancamento_obra'
        const app = 'Lancamento_obra'
        const csrftoken = '9Wqdjgd0gITlljNiuk1deIhsat5ep8ysdwzrBwijcwL5tsTQSGslGCZ1t5Vldc2g'
        const user = 'felipe';
        const icon = "/static/icons";
    </script> <!--Routers de Tag -->
    <script src="./Lancamento obra_files/base.js.download"></script>

    
    <link rel="stylesheet" href="./Lancamento obra_files/sidebar.css">
    
    
<script>
    $(document).ready(function(){
        loadForm('programacao')  
    })

    const prefix = 'form_programacao_';
    var linhas = []
    function adicionaZero(numero) {
        if (numero <= 9)
            return "0" + numero;
        else
            return numero;
    }

    const arquivo = document.getElementById('form_programacao_arquivo');
    console.log(arquivo)
    function abrirFoto() {
        console.log('carregando')
        filename = arquivo.val().replace("C:\\fakepath\\", "").split(".")
        let reader = new FileReader();

        reader.onload = () => {
            $('#form_programacao_digitalizacao').attr('src', reader.result);
            previewModal_img(reader.result)
        }
        reader.readAsDataURL(arquivo.files[0]);
    };
    
    $('#register').click(function () {
        let file = arquivo[0].files[0];
        if (!file) {
            toasts('warning',{'method':'Registro','message':"Por favor, selecione um arquivo primeiro."})
            return;
        }
        
        let segunda = $('#form_programacao_data').val()
        let lanc = [];
        for (i = 0; $('#' + prefix + 'obra_id_' + linhas[i]).val() != undefined; i++) {
            let obra = $('#' + prefix + 'obra_id_' + linhas[0]).val();
            let encarregado = $('#' + prefix + 'encarregado_' + linhas[0]).val();
            let colaborador = $('#' + prefix + 'colaborador_' + linhas[i]).val()
            
            lanc.push({
                'colaborador': colaborador,
                'obra_id': obra,
                'encarregado': encarregado
            })
        }
        let parametro = {
            'lanc': JSON.stringify(lanc),
            'iniciosemana': segunda,
            'imagem': segunda + '.' + filename[(filename.length - 1)]
        }
        let formData = new FormData();
        formData.append('file', file);
        formData.append('parametro', JSON.stringify(parametro));
        formData.append('metodo', 'programacao');

        apiRequest.upload(
            'register',
            formData
        )
        
    }
    )
    function addLinha() {
        $('#linhas').prepend(
            `<div class="row mb-1 align-items-center" id="linha${linha}">` +
            '<div class="col p-1">' +
            '<div class="form-floating">' +
            `<select class="form-select" id="${prefix}encarregado_${linha}" aria-label="Floating label select example">` +
            encarregados +
            '</select>' +
            `<label for="${prefix}encarregado_${linha}">Encarregado</label>` +
            '</div>' +
            '</div>' +
            '<div class="col p-1">' +
            '<div class="form-floating">' +
            `<select class="form-select" id="${prefix}obra_id_${linha}">` +
            obras +
            '</select>' +
            `<label for="${prefix}obra_id_${linha}">Obra</label>` +
            '</div>' +
            '</div>' +
            '<div class="col p-1">' +
            '<div class="form-floating">' +
            `<select class="form-select" id="${prefix}colaborador_${linha}">` +
            colaboradores +
            '</select>' +
            `<label for="${prefix}colaborador_${linha}">Colaborador</label>` +
            '</div>' +
            '</div>' +

            '<div class="col-auto p-1">' +
            `<button type="button" class="btn btn-danger" onclick="removeLinha(${linha})"><img src="${icon}/trash.svg"></button>` +
            '</div>'
        )

        if (linhas.length != 0) {
            let ant = linhas.indexOf(linha - 1)
            $(`#${prefix}obra_id_${linha}`).val($(`#${prefix}obra_id_${linhas[ant]}`).val())
            $(`#${prefix}encarregado_${linha}`).val($(`#${prefix}encarregado_${linhas[ant]}`).val())
            $('#' + prefix + 'semencarregado_' + linha).attr('checked', $('#' + prefix + 'semencarregado_' + linhas[ant]).prop('checked'))
        }
        linhas.push(linha)
        linha++

    }
    function removeLinha(id) {
        $('#linha'.concat(id)).remove()
        linhas.splice(linhas.indexOf(id), 1)
    }
    var obras;
    var colaboradores;
    var encarregados;
    function loadVar(select) {
        apiRequest.get('get_table','select',select,function(data){
            for (let i = 0; i < data.length; i++) {
                if (select == 'obra_id' && !data[i].finalizada) {
                    obras += `<option value=${data[i].id}>${data[i].id} || ${data[i].empresa} | ${data[i].cidade}</option>`
                }
                else if (select == 'colaborador' && data[i].demissao == null) {
                    colaboradores += `<option>${data[i].nome}</option>`
                }
                else if (select == 'encarregado') {
                    encarregados += `<option>${data[i].nome}</option>`
                }
            }
        })
    }
    var linha = 0
    loadVar('obra_id')
    loadVar('colaborador')
    loadVar('encarregado')
    setTimeout(function () {
        addLinha()
    }, 400)
</script></head>








<body>
    
    
<nav class="navbar">
  
  <a href="http://10.0.0.211:8001/" ,="" style="color: black; text-decoration: none; padding-left: 10px;"><img src="./Lancamento obra_files/x-circle-fill.svg" alt="" style="margin-right: 5px;">Fechar app</a>
    
    
    <div class="dropdown-center me-1">
      <button class="navbar-toggler" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        <img src="./Lancamento obra_files/person-circle.svg" alt="" class="user-icon">
        <span><strong>felipe</strong></span>
      </button>
      <ul class="dropdown-menu dropdown-menu-end">
        <li><a class="dropdown-item" href="http://10.0.0.211:8001/login">Desconectar</a></li>
        <li><a class="dropdown-item" href="https://wa.me/555596238751" target="_blank">Ajuda</a></li>
      </ul>
    </div>
  
</nav>

    
    

<div class="sidenav">
    <h1 class="nome_app">Lançamento obra</h1>
    <div class="accordion accordion-flush" id="accordion">
        
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#menu-cadastro" aria-expanded="false">
                    Cadastros
                </button>
            </h2>
            <div id="menu-cadastro" class="accordion-collapse collapse" data-bs-parent="#accordion">
                <a href="http://10.0.0.211:8001/Lancamento_obra/cadastros/colaborador"><i class="bi-box-arrow-in-right"></i> Colaborador</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/cadastros/obra"><i class="bi-box-arrow-in-right"></i> Obra</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/lancamentos/programacao#" onclick="loadModal(&#39;register_funcao&#39;, &#39;funcao&#39;)"><i class="bi-window-stack"></i> Função</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/lancamentos/programacao#" onclick="loadModal(&#39;register_supervisor&#39;, &#39;supervisor&#39;)"><i class="bi-window-stack"></i>
                    Supervisor</a>
            </div>
        </div>
        
        
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#menu-lancamento" aria-expanded="false">
                    Lançamentos
                </button>
            </h2>
            <div id="menu-lancamento" class="accordion-collapse collapse" data-bs-parent="#accordion">
                <a href="http://10.0.0.211:8001/Lancamento_obra/lancamentos/atividade"><i class="bi-box-arrow-in-right"></i> Atividade</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/lancamentos/diario"><i class="bi-box-arrow-in-right"></i> Diário</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/lancamentos/programacao"><i class="bi-box-arrow-in-right"></i> Programação</a>
            </div>
        </div>
        
        
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#menu-tabelas" aria-expanded="false">
                    Tabelas
                </button>
            </h2>
            <div id="menu-tabelas" class="accordion-collapse collapse" data-bs-parent="#accordion">
                <a href="http://10.0.0.211:8001/Lancamento_obra/tabelas/colaborador"><i class="bi-table"></i> Colaboradores</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/tabelas/obra"><i class="bi-table"></i> Obras</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/tabelas/atividade"><i class="bi-table"></i> Atividade</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/tabelas/diario"><i class="bi-table"></i> Diário</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/tabelas/programacao"><i class="bi-table"></i> Programação</a>
            </div>
        </div>
        
        
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#menu-consultas" aria-expanded="false">
                    Consultas
                </button>
            </h2>
            <div id="menu-consultas" class="accordion-collapse collapse" data-bs-parent="#accordion">
                <a href="http://10.0.0.211:8001/Lancamento_obra/consultas/incompletos"><i class="bi-table"></i> Incompletos</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/consultas/hora_mes"><i class="bi-table"></i> Horas por mês</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/consultas/efetividade"><i class="bi-table"></i> Efetividade</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/consultas/descontos_resumo"><i class="bi-table"></i> Descontos</a>
                <a href="http://10.0.0.211:8001/Lancamento_obra/consultas/diarias"><i class="bi-table"></i> Diárias</a>
            </div>
        </div>
        
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#menu-graficos" aria-expanded="false">
                    Graficos
                </button>
            </h2>
            <div id="menu-graficos" class="accordion-collapse collapse" data-bs-parent="#accordion">
                <a href="http://10.0.0.211:8001/Lancamento_obra/graficos/horas_extras"><i class="bi-file-earmark-bar-graph"></i> Horas
                    extras</a>
            </div>
        </div>
    </div>
</div>
    
    <header>
        
<h2>Lançamento de Programação</h2>

    </header>
    
    <main>
        

<div class="row">
    <div class="col">
        <div class="input-group mb-2">
            <label class="input-group-text">Digitalizado</label>
            <input type="file" class="form-control" id="form_programacao_arquivo" onchange="abrirFoto()">
        </div>

        <div class="input-group mb-2">
            <label class="input-group-text" for="form_programacao_data">Data:</label>
            <input type="date" id="form_programacao_data" class="form-control">
        </div>




        <div class="row justify-content-between">
            <div class="col align-self-end"></div>
            <div class="col-auto"><button type="button" class="btn btn-primary mt-2 mb-2" onclick="addLinha()">Adicionar
                    detalhe</button></div>
            <div class="col-auto"><button type="button" class="btn btn-success mt-2 mb-2" id="register">Lançar</button>
            </div>
        </div>
        <div div="container text-start mb-2" style="border-top: 1px solid lightgray; padding-top: 10px;">
            <h5>Detalhes</h5>
            <div id="linhas" style="overflow-y: auto; width: fit-content; overflow-x: hidden; padding-inline: 10px;"><div class="row mb-1 align-items-center" id="linha0"><div class="col p-1"><div class="form-floating"><select class="form-select" id="form_programacao_encarregado_0" aria-label="Floating label select example">undefined<option>.</option><option>ANDREIA MARTINELLI</option><option>CESAR RODRIGO DOS SANTOS</option><option>JONI OSMANI MARTIN</option></select><label for="form_programacao_encarregado_0">Encarregado</label></div></div><div class="col p-1"><div class="form-floating"><select class="form-select" id="form_programacao_obra_id_0">undefined<option value="1">1 || ATESTADOS | TECNIKA</option><option value="2">2 || DISPENSADOS | TECNIKA</option><option value="3">3 || FALTAS | TECNIKA</option><option value="4">4 || FOLGAS | TECNIKA</option><option value="5">5 || FERIAS | TECNIKA</option><option value="6">6 || TREINAMENTOS E EXAMES | TECNIKA</option><option value="7">7 || SERVIÇOS INTERNOS | TECNIKA</option><option value="711">711 || RECANTO DO LAGO | TRÊS DE MAIO</option><option value="726">726 || MKE | SANTA ROSA</option><option value="761">761 || MOGAR | SANTA ROSA</option><option value="764">764 || TECNIKA | SANTA ROSA</option><option value="773">773 || LONDERO | DR. MAURÍCIO CARDOSO</option><option value="782">782 || TECNIKA | SANTA ROSA</option><option value="793">793 || COTRIBÁ | IBIRUBÁ</option><option value="804">804 || AGROMAQ | PASSO FUNDO</option><option value="807">807 || C-VALE | CRUZ ALTA</option><option value="811">811 || DEISICON | SANTA ROSA </option><option value="813">813 || FELICE | SANTA ROSA</option><option value="821">821 || PREFEITURA MUNICIPAL | SANTA ROSA</option><option value="826">826 || FELICE | CRUZ ALTA</option><option value="827">827 || FELICE | ALEGRETE</option><option value="828">828 || FELICE | SANTO ÂNGELO</option><option value="829">829 || FELICE | RIO GRANDE</option><option value="838">838 || SIMBIOSE | CRUZ ALTA</option><option value="842">842 || SIMBIOSE | CRUZ ALTA</option><option value="844">844 || BETO VACCARI | SANTA ROSA</option><option value="845">845 || POSTO SIM | SANTIAGO</option><option value="847">847 || MECASUL | IJUÍ</option><option value="851">851 || ED. ROCCO | SANTO ÂNGELO</option><option value="852">852 || VILLA LOBOS | SANTA ROSA</option><option value="853">853 || CERAÇA | PANAMBI</option><option value="854">854 || JOHN DEERE | HORIZONTINA</option><option value="856">856 || JOHN DEERE | HORIZONTINA</option><option value="858">858 || ED. TOSCANA | SANTA ROSA</option><option value="859">859 || ATACADO NICOLINI | BAGÉ</option><option value="862">862 || AGCO | IBIRUBÁ</option><option value="864">864 || RUDOLPH | CHAPECÓ</option><option value="867">867 || FELICE | SANTA MARIA</option><option value="873">873 || MILTON BONINI | SANTO ÂNGELO</option><option value="875">875 || SILVA ATACAREJO | SEBERI</option><option value="878">878 || COFELMA | SANTA MARIA</option><option value="879">879 || SEGATTO ARTEFATOS | TRÊS DE MAIO</option><option value="880">880 || TRANSPORTES FALCÃO | URUGUAIANA</option><option value="881">881 || OLFAR | ERECHIM</option><option value="882">882 || SERVIÇOS INTERNOS | SANTA ROSA</option><option value="883">883 || MKE | SANTA ROSA</option><option value="887">887 || TK ELEVADORES | PORTO ALEGRE</option><option value="888">888 || TKM | SANTA ROSA</option><option value="889">889 || MARCELO | NOVO HAMBURGO</option><option value="890">890 || FELICE | IJUÍ</option><option value="892">892 || GRÁFICA REX | NOVA CANDELÁRIA</option><option value="895">895 || PARKTUR | SANTA ROSA</option><option value="896">896 || INOVAR | SANTO ÂNGELO</option><option value="897">897 || CLUBE COMERCIAL | PASSO FUNDO</option><option value="898">898 || MSK - FENASOJA | SANTA ROSA</option><option value="899">899 || LAR BOM PASTOR | BOA VISTA DO BURICÁ</option><option value="900">900 || POSTO 74 | SÃO MARTINHO</option><option value="901">901 || BRUNING | PANAMBI</option><option value="902">902 || JOHN DEERE | HORIZONTINA</option><option value="903">903 || SAUR | PANAMBI</option><option value="904">904 || BENOIT | LAJEADO</option><option value="905">905 || PECCIN | ERECHIM</option><option value="906">906 || JOHN DEERE | HORIZONTINA</option><option value="907">907 || D. SARTOR | SANTA ROSA</option><option value="908">908 || MASTER | XANXERÊ</option><option value="909">909 || VIZA | PATO BRANCO</option><option value="910">910 || BRUNING | PANAMBI</option><option value="911">911 || UNIMED | SANTA ROSA</option><option value="912">912 || AMBEV | PORTO ALEGRE</option><option value="913">913 || POSTO SIM | SANTA MARIA</option><option value="914">914 || BRUNING | PANAMBI</option><option value="916">916 || LEANDRO HOLZ | SANTA ROSA</option><option value="917">917 || CCGL | BAGÉ</option><option value="918">918 || COTRIPAL | PANAMBI</option><option value="919">919 || GRÁFICA REX | NOVA CANDELÁRIA</option><option value="922">922 || JOHN DEERE | HORIZONTINA</option><option value="923">923 || PECCIN | ERECHIM</option></select><label for="form_programacao_obra_id_0">Obra</label></div></div><div class="col p-1"><div class="form-floating"><select class="form-select" id="form_programacao_colaborador_0">undefined<option>ADRIANO ALCINEI SCHONINGER</option><option>ADRIANO SILVA PINTO</option><option>AIRTON RODRIGUES GONÇALVES</option><option>ALDERIVAN ROCHA RIBEIRO</option><option>ALEX SANDER DORNELLES DA SILVA</option><option>ALVARO ANTONIO CEDENO ESPINOZA</option><option>ANDERSON RAFAEL MOHA</option><option>ANDRE LUIS MATOS PEREIRA</option><option>ANDRE PEREIRA DOS SANTOS</option><option>ANDREIA MARTINELLI</option><option>ANTONIO CARLOS GUERREIRO PERASSOLO</option><option>BRUNO GUSTAVO KEIDANN OLIZAROSKI</option><option>CARLOS FRANCISCO WEISS ASSENHEIMER</option><option>CARLOS JUAREZ</option><option>CELSO VITOR MATTOS DA SILVA</option><option>CESAR RODRIGO DOS SANTOS</option><option>CLAUDIO CARVALHO</option><option>CLAYSON ALVES DOS SANTOS DE OLIVEIRA</option><option>CLEBER GEAN VARGAS FLORES</option><option>COSME MICAEL ANTUNES DE ANDRADE</option><option>DILSON DOS SANTOS SCHEFFER</option><option>DOUGLAS DE LIMA PORTO</option><option>FABIANO BARANSKI</option><option>FABIO LUCIANO SLODKOWSKI</option><option>FREDDY STEVEN VELASQUEZ AGUILERA</option><option>GELSON JOSE SROCZYNSKI</option><option>GEOVANI DA VEIGA LEITE</option><option>GUILHERME SILVA DA SILVA</option><option>GUILHERME VELOSO DOS SANTOS PEREIRA</option><option>HUMBERTO SAID BERMUDEZ</option><option>IRTON DEPPNER</option><option>ITAMAR THALES MARTINS</option><option>ITAUA SANTOS SENNA</option><option>JADER FILIPE PEROTY</option><option>JARDEL ALMEIDA</option><option>JEFERSON GULART MELO</option><option>JEFERSON JARDIM DOS SANTOS</option><option>JHANGEL ANTONIO ROJAS COELHO</option><option>JOAO MARCELO FEIDEN JUNIOR</option><option>JOARK HENRIQUE DE MOURA RIBEIRO</option><option>JOEL JESUS BERMUDEZ</option><option>JOHN LENON SANTOS DE OLIVEIRA</option><option>JONAS AMARAL DE FLORES</option><option>JONI OSMANI MARTIN</option><option>JOSE MIGUEL CAMBERO LUCES</option><option>JOSE MIGUEL SEGURA PATINO</option><option>JOSE RUDINEI DOS SANTOS</option><option>JOSE VALDECIR DA SILVA</option><option>JOSÉ MANOEL DA SILVA</option><option>JUAREZ VANDER VIS</option><option>JULIO CESAR BRAGA</option><option>JUNIOR CESAR SANTOS DE OLIVEIRA</option><option>LOURIVALDO VELOSO DA SILVA SANTOS</option><option>LUIS FERNANDO COSTA</option><option>LUIS GERALDO ROSAS PINO</option><option>LUIS ROGERIO CAVALHEIRO</option><option>LUIZ CARLOS SOARES</option><option>LUIZ CARLOS WELTER MAYER</option><option>MAIOL CORREA ANTUNES</option><option>MARCELO BIERMANN DA VEIGA</option><option>MARCELO JONATAN SCHUTZ</option><option>MARCIO ROBERTO FEIDEN</option><option>MARCOS ALVES DOS SANTOS</option><option>MARCOS ANTONIO KRAULICH</option><option>MARLON SILVA DE JESUS</option><option>MATEUS GAZE MARTINELLI SOARES</option><option>MICAEL FERREIRA DOS SANTOS</option><option>MICHAEL LUIZ DE OLIVEIRA</option><option>PAULO NATALINO RADIUC</option><option>PAULO ROBERTO DE SOUZA</option><option>RAFAEL DOS SANTOS DE LIMA</option><option>RAIMUNDO JOSÉ ALVES DA SILVA</option><option>REGINALDO GOMES DA ROCHA</option><option>RENAN BORGES MARTINS</option><option>ROBERTO CARLOS DE AMARAL</option><option>ROBERTO PASINI</option><option>ROBISON MARIANO ANTUNES</option><option>ROBSON ADRIANO DE OLIVEIRA SANTOS</option><option>RODRIGO MOREIRA DE SA DOS SANTOS</option><option>ROGERIO BORGES DOS SANTOS</option><option>ROGERIO DOS SANTOS DA SILVA</option><option>ROSMAR JOSE CABELLO CALDERA</option><option>SANDRO SIDNEI FALEIRO</option><option>SERGIO LUIS FALEIRO</option><option>VALDIR ANTUNES</option><option>VALMIR DA SILVA</option><option>VANDERLEI JOSE DILSCHNEIDER</option><option>WILLHANN PRZYCZYNSKI DE LIMA</option><option>WILLIAM DA SILVA MELO</option></select><label for="form_programacao_colaborador_0">Colaborador</label></div></div><div class="col-auto p-1"><button type="button" class="btn btn-danger" onclick="removeLinha(0)"><img src="./Lancamento obra_files/trash.svg"></button></div></div></div>
        </div>

    </div>

    <div class="col-auto">
        <div class="text-center">
            <img src="./Lancamento obra_files/104090.png" class="img-thumbnail" alt="Digitalização" style="width: 750px; height: 600px; object-fit: contain; " id="form_programacao_digitalizacao" data-bs-toggle="modal" data-bs-target="#view_programacao">
        </div>
    </div>
</div>


    </main>
    
    
    <style>
    .microlist {
        height: 200px;
        overflow: auto;
        border-top: 1px solid #dee2e6;
    }

    th {
        font-size: small;
    }
</style>


<div class="modals">
    <div class="modal fade" id="register_funcao" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" id="register_funcao">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Cadastro de função</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="input-group mb-2">
                        <label class="input-group-text" for="inputGroupSelect01">Nome:</label>
                        <input type="text" name="nome" id="register_funcao_funcao" class="form-control">
                    </div>
                    <div class="input-group mb-2">
                        <label class="input-group-text" for="inputGroupSelect01">Grupo:</label>
                        <select class="form-select" id="register_funcao_grupo" name="grupo">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-primary mb-2" onclick="registerModal(&#39;register_funcao&#39;)">Cadastrar</button>
                    <div class="microlist">
                        <table class="table table-hover table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">Nome</th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody id="register_funcao_table"></tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal supervisor-->
    <div class="modal fade" id="register_supervisor" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Cadastro de supervisor</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="input-group mb-2">
                        <label class="input-group-text" for="inputGroupSelect01">Nome:</label>
                        <input type="text" name="super_nome" id="register_supervisor_supervisor" class="form-control">
                    </div>
                    <div class="input-group mb-2">
                        <span class="input-group-text">Ativo</span>
                        <div class="input-group-text">
                            <input class="form-check-input mt-0" type="checkbox" aria-label="Checkbox for following text input" id="register_supervisor_ativo" checked="">
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary mb-2" onclick="registerModal(&#39;register_supervisor&#39;)">Registrar</button>
                    <div class="microlist">
                        <table class="table table-hover table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">Nome</th>
                                    <th scope="col">Ativo?</th>
                                </tr>
                            </thead>
                            <tbody id="register_supervisor_table"></tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>

                </div>
            </div>
        </div>
    </div>
    <script>

    </script>
    <!-- Modal upadate colaborador-->
    <div class="modal fade" id="update_colaborador" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Edição de colaborador</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-3">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">ID:</label>
                                <input type="text" id="update_colaborador_id" class="form-control" disabled="">
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Nome:</label>
                                <input type="text" id="update_colaborador_nome" class="form-control">
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Admissão:</label>
                                <input type="date" id="update_colaborador_admissao" class="form-control">
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Função:</label>
                                <select class="form-select" name="selectFuncao" id="update_colaborador_funcao">
                                </select>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Demissão:</label>
                                <input type="date" name="uptade_demissao" id="update_colaborador_demissao" class="form-control">
                            </div>
                        </div>

                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <div class="input-group-text">
                                    <input class="form-check-input mt-0" type="checkbox" id="update_colaborador_encarregado">
                                </div>
                                <span class="input-group-text">Encarregado</span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Tipo de contrato:</label>
                                <select class="form-select" id="update_colaborador_contrato" name="update_colaborador_contrato" onchange="toggleDiaria()">
                                    <option value="CLT">CLT</option>
                                    <option value="Terceiro">Terceiro</option>
                                </select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group input-group mb-2" id="update_colaborador_div_diaria">
                                <span class="input-group-text">Valor da Diaria</span>
                                <input type="text" class="form-control" aria-label="Dollar amount (with dot and two decimal places)" name="update_diaria" id="update_colaborador_diaria">
                                <span class="input-group-text">R$</span>
                            </div>
                        </div>

                    </div>

                    <div class="input-group input-group mb-2">
                        <span class="input-group-text">Observações</span>
                        <textarea class="form-control" aria-label="With textarea" name="update_colaborador_observacao" id="update_colaborador_observacao"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="update_colaborador_del" data-bs-dismiss="modal">Deletar</button>
                    <button type="button" class="btn btn-success" id="update_colaborador_btn">Salvar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal update obra-->
    <div class="modal fade" id="update_obra" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Edição de obra</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">CR:</label>
                                <input type="text" name="update_obra_cr" id="update_obra_id" class="form-control" disabled="">
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Orçamento:</label>
                                <input type="text" name="update_obra_orcamento" id="update_obra_orcamento" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="update_obra_retrabalho">Retrabalho</label>
                                <input type="text" class="form-control" name="update_obra_retrabalho" id="update_obra_retrabalho">
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group mb-2">
                                <label class="input-group-text" for="form_obra_cidade">Tecnicon:</label>
                                <input type="text" id="form_obra_tecnicon" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Empresa:</label>
                                <input type="text" id="update_obra_empresa" class="form-control">
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Cidade:</label>
                                <input type="text" id="update_obra_cidade" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="input-group mb-2">
                        <label class="input-group-text" for="update_obra_indice">Índice:</label>
                        <select class="form-select" id="update_obra_indice">
                            <option value="OBRAS ENGENHARIA">OBRAS ENGENHARIA</option>
                            <option value="RETRABALHO">RETRABALHO</option>
                            <option value="SERVIÇOS PARA O GRUPO">SERVIÇOS PARA O GRUPO</option>
                        </select>
                    </div>

                    <div class="row">
                        <div class="col-auto">
                            <div class="input-group input-group mb-2">
                                <div class="input-group-text">
                                    <input class="form-check-input mt-0" type="checkbox" value="True" aria-label="Checkbox for following text input" name="update_obra_finalizada" id="update_obra_finalizada">
                                </div>
                                <span class="input-group-text">Finalizada</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Supervisor:</label>
                                <select class="form-select" id="update_obra_supervisor_id"></select>
                            </div>
                        </div>
                        <div class="input-group input-group mb-2">
                            <label class="input-group-text" for="update_obra_descricao">Descrição:</label>
                            <textarea type="text" id="update_obra_descricao" class="form-control"></textarea>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="update_obra_del">Deletar</button>
                    <button type="button" class="btn btn-success" id="update_obra_btn">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal update att-->
    <div class="modal fade" id="update_atividade" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Edição de atividade</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-4">
                            <div class="input-group input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">ID:</label>
                                <input type="text" name="update_att_id" id="update_atividade_id" class="form-control" disabled="">
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Data de realização:</label>
                                <input type="date" name="dia" id="update_atividade_dia" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="input-group mb-2">
                        <label class="input-group-text" for="inputGroupSelect01">Colaborador:</label>
                        <select class="form-select" id="update_atividade_colaborador" name="colaborador">
                        </select>
                    </div>


                    <div class="input-group mb-2">
                        <label class="input-group-text" for="update_atividade_obra">Obra:</label>
                        <select class="form-select" id="update_atividade_obra_id" name="obra" onchange="changeObra()">

                        </select>
                    </div>



                    <div class="row align-items-start">
                        <div class="col">
                            <div class="input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Atividade:</label>
                                <select class="form-select" id="update_atividade_atividade_id" name="atividade">

                                </select>
                            </div>
                        </div>


                        <div class="col">
                            <div class="input-group mb-2">
                                <label class="input-group-text" for="inputGroupSelect01">Indice do diario:</label>
                                <select class="form-select" id="update_atividade_indice" name="indice">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>

                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="input-group mb-2">
                        <label class="input-group-text">Responsável:</label>
                        <select class="form-select" id="update_atividade_supervisor_id"></select>
                    </div>
                    <div class="input-group mb-2">
                        <label class="input-group-text">Motivo:</label>
                        <input type="text" class="form-control" id="update_atividade_motivo">
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="input-group mb-2">
                                <div class="input-group-text">
                                    <input class="form-check-input" type="checkbox" id="update_atividade_diaseguinte">
                                </div>
                                <span class="input-group-text">Plantão</span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group mb-2">
                                <div class="input-group-text">
                                    <input class="form-check-input" type="checkbox" id="update_atividade_meiadiaria">
                                </div>
                                <span class="input-group-text">Meia diaria</span>
                            </div>
                        </div>
                    </div>

                    <div class="input-group mb-2">
                        <span class="input-group-text">Descrição:</span>
                        <textarea class="form-control" aria-label="With textarea" name="descricao" id="update_atividade_descricao"></textarea>
                    </div>
                    <div class="input-group mb-2">
                        <label class="input-group-text" for="inputGroupSelect01">Hora Manhã</label>
                        <input type="time" id="update_atividade_horaini1" class="form-control">
                        <input type="time" id="update_atividade_horafim1" class="form-control">
                    </div>

                    <div class="input-group mb-2">
                        <label class="input-group-text" for="inputGroupSelect01">Hora Tarde</label>
                        <input type="time" id="update_atividade_horaini2" class="form-control">
                        <input type="time" id="update_atividade_horafim2" class="form-control">
                    </div>
                    <div class="input-group mb-2">
                        <label class="input-group-text" for="inputGroupSelect01">Hora Noite</label>
                        <input type="time" id="update_atividade_horaini3" class="form-control">
                        <input type="time" id="update_atividade_horafim3" class="form-control">
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="update_atividade_del" data-bs-dismiss="modal">Deletar</button>
                    <button type="button" class="btn btn-success" id="update_atividade_btn">Salvar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal diario-->
    <div class="modal" id="view_diario" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Diário digital</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img alt="imagem ausente" class="img-thumbnail" id="view_diario_digitalizado">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Update diário -->
    <div class="modal fade" id="update_diario" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Edição de Diário</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="col-4">
                        <div class="input-group mb-2">
                            <label class="input-group-text" for="update_diario_id">ID:</label>
                            <input type="number" class="form-control" id="update_diario_id" disabled="">
                        </div>
                    </div>
                    <div class="row">

                        <div class="col">
                            <div class="input-group mb-2">
                                <label class="input-group-text" for="update_diario_obra">Obra:</label>
                                <select class="form-select" id="update_diario_obra_id" disabled="">
                                </select>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="input-group mb-2">
                                <label class="input-group-text" for="update_diario_indice">Indice:</label>
                                <input type="number" name="indice" id="update_diario_indice" class="form-control" disabled="">
                            </div>
                        </div>
                    </div>



                    <div class="input-group mb-2">
                        <label class="input-group-text" for="update_diario_encarregado">Encarregado:</label>
                        <select class="form-select" id="update_diario_encarregado" name="encarregado">
                            <option value=""></option>
                        </select>
                    </div>

                    <div class="input-group mb-2">
                        <label class="input-group-text" for="update_diario_data">Data:</label>
                        <input type="date" name="data" id="update_diario_data" class="form-control" disabled="">
                    </div>
                    <div class="input-group mb-2">
                        <span class="input-group-text">Descrição:</span>
                        <textarea class="form-control" id="update_diario_descricao"></textarea>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="input-group mb-2">
                                <label class="input-group-text" for="update_diario_climamanha">Manhã</label>
                                <select class="form-select" id="update_diario_climamanha" name="climamanha">
                                    <option>Sol</option>
                                    <option>Chuva</option>
                                    <option>Nublado</option>
                                    <option selected="">Não informado</option>
                                </select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group mb-2">
                                <label class="input-group-text" for="update_diario_climatarde">Tarde</label>
                                <select class="form-select" id="update_diario_climatarde" name="climatarde">
                                    <option selected="">Sol</option>
                                    <option>Chuva</option>
                                    <option>Nublado</option>
                                    <option selected="">Não informado</option>
                                </select>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="update_diario_del" data-bs-dismiss="modal">Deletar</button>
                    <button type="button" class="btn btn-success" id="update_diario_btn">Salvar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal programação-->
    <div class="modal" id="view_programacao" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Programação digital</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img alt="imagem ausente" class="img-thumbnail" id="view_programacao_digitalizado">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal update programação -->
    <div class="modal fade" id="update_programacao" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Edição de Programação</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-4">
                            <div class="input-group mb-2">
                                <label class="input-group-text" for="update_programacao_id">ID:</label>
                                <input type="text" class="form-control" id="update_programacao_id" disabled="">
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="input-group mb-2">
                                <label class="input-group-text" for="update_programacao_iniciosemana">Segunda-feira:</label>
                                <input type="date" name="data" id="update_programacao_iniciosemana" class="form-control" disabled="">
                            </div>
                        </div>
                    </div>


                    <div class="col">
                        <div class="input-group mb-2">
                            <label class="input-group-text" for="update_programacao_colaborador">Colaborador:</label>
                            <select class="form-select" id="update_programacao_colaborador" disabled="">
                            </select>
                        </div>
                    </div>

                    <div class="input-group mb-2">
                        <label class="input-group-text" for="update_programacao_encarregado">Encarregado:</label>
                        <select class="form-select" id="update_programacao_encarregado">
                            <option value=""></option>
                        </select>
                    </div>

                    <div class="input-group mb-2">
                        <label class="input-group-text" for="update_programacao_obra">Obra:</label>
                        <select class="form-select" id="update_programacao_obra">

                        </select>
                    </div>

                    <div class="input-group mb-2">
                        <span class="input-group-text">Observação:</span>
                        <textarea class="form-control" id="update_programacao_observacao"></textarea>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="update_programacao_del" data-bs-dismiss="modal">Deletar</button>
                    <button type="button" class="btn btn-primary" id="">Visualizar</button>
                    <button type="button" class="btn btn-success" id="update_programacao_btn">Salvar</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    //Preencher os campos de cada modal
    function loadModal(modal, parametro) {
        let a = modal.split("_");
        let old_objLoaded = objLoaded;

        objLoaded = { method: a[0], name: a[1], prefix: modal + "_" };
        loadColumns('exibir');
        if (objLoaded.prefix != modalLoad) {
            $("#" + objLoaded.prefix + "btn").click(function () {
                submit.update(objLoaded.method);
            });
            $("#" + objLoaded.prefix + "del").click(function () {
                deleteData($("#" + objLoaded.prefix + "id").val());
            });
            modalLoad = objLoaded.prefix;
        }

        if (objLoaded.method == "update") {
            apiRequest.get('get_data', a[1], parametro, function (data) {
                data = data[0]
                columns.inputs.push("id");

                values = columns.inputs.concat(columns.select);
                values.forEach((field)=>{
                    $("#" + modal + "_" + field).val(data[field]);
                })
                columns.checks.forEach((check) => {
                    $("#" + modal + "_" + check).prop("checked", data[check]);
                })

                if (a[1] == "colaborador") {
                    toggleDiaria();
                }
                if (a[1] == "atividade") {
                    changeObra();
                }
            })

        } else if (objLoaded.method == "register") {
            loadTable(objLoaded.prefix, objLoaded.name);
            loadColumns('exibir');
            modalLoad = objLoaded.prefix;
        } else if (objLoaded.method == "view") {
            previewModal_img(midia+ '/' + objLoaded.name + '/'+ parametro + ".jpeg");
        }
        setTimeout(function () {
            showModal(old_objLoaded);
        }, 400)
    }
    function showModal(old_objLoaded) {
        let myModal = new bootstrap.Modal(
            document.getElementById(objLoaded.method + "_" + objLoaded.name)
        );
        myModal.show();

        let myModalEvent = document.getElementById(
            objLoaded.method + "_" + objLoaded.name
        );
        myModalEvent.addEventListener("hidden.bs.modal", (event) => {
            objLoaded = old_objLoaded;
            loadColumns();
        });
    }
    function toggleAtivo(supervisor, isActive) {
        apiRequest.update('update', 'supervisor', { ativo: isActive, supervisor: supervisor })
    }
    
//Registro que é realizado via modal
function registerModal(modal) {
    submit.post("register");
    setTimeout(function () {
        loadTable(modal, modal.split("_")[1]);
    }, 100);
}
</script>

<script src="./Lancamento obra_files/Lancamento_obra.js.download"></script>
<div class="toasts">
    <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toastContainer">
    </div>
    <div id="toastTemplate" class="toast mb-2" role="alert" aria-live="assertive" aria-atomic="true" style="display: none;">
        <div class="toast-body">
            <strong class="toast-method me-auto toast-title"></strong> <br>
            <small class="toast-message"></small>
        </div>
    </div>
    
</div>
<script>
    // Função para clonar o toast e exibi-lo
    function toasts(type, response) {
        // Clona o elemento do template
        const newToast = $("#toastTemplate").clone().removeAttr('id').css('display', 'block');
        
        // Adiciona o título e o conteúdo
        newToast.find('.toast-method').text(response.method ? response.method : 'Erro desconhecido');
        newToast.find('.toast-message').text(response.message ? response.message : 'Contate a equipe de TI');

    
        // Ajusta a cor de acordo com o tipo (sucesso ou erro)
        newToast.addClass(`bg-${type} text-white`);
    
        // Adiciona o toast ao contêiner
        $("#toastContainer").append(newToast);
    
        // Inicializa o toast com Bootstrap e exibe
        const toastElement = new bootstrap.Toast(newToast[0], { delay: 5000 });
        toastElement.show();
    
        // Remove o toast da DOM após ele ser escondido
        newToast.on('hidden.bs.toast', function () {
            $(this).remove();
        });
    }

</script>


</body></html>